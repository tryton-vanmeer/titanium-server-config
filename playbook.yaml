---
- hosts: all
  tasks:
  - name: Update Packages
    become: true
    dnf:
      name: "*"
      state: latest

  - name: Install 'Fedora Server Edition' Group
    become: true
    dnf:
      name: "@Fedora Server Edition"
      state: present
    when: "inventory_hostname == 'vm'"

  - name: Add '{{ ansible_user_id }}' to 'wheel' Group
    become: true
    user:
      name: "{{ ansible_user_id }}"
      groups:
        - "wheel"
      append: true

- hosts: all
  roles:
    - storage
    - firewall
    - nginx
    - cockpit
    - transmission
    - podman
    - jellyfin
    - homer